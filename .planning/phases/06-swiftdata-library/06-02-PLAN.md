---
phase: 06-swiftdata-library
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified: [seed/seedApp.swift, seed/ContentView.swift, seed/Screens/HomeView.swift]
autonomous: true

must_haves:
  truths:
    - "User sees bottom nav with 3 tabs (home/library/search)"
    - "Library is default screen when texts exist"
    - "Empty state shows when no texts"
  artifacts:
    - path: "seed/seedApp.swift"
      provides: "SwiftData modelContainer setup"
      contains: ".modelContainer"
    - path: "seed/ContentView.swift"
      provides: "Bottom nav TabView with 3 tabs"
      contains: "TabView"
    - path: "seed/Screens/HomeView.swift"
      provides: "Home screen placeholder"
      min_lines: 15
  key_links:
    - from: "seedApp"
      to: "SavedText"
      via: ".modelContainer(for: SavedText.self)"
      pattern: "modelContainer.*SavedText"
    - from: "ContentView"
      to: "LibraryView"
      via: "TabView tab"
      pattern: "LibraryView"
    - from: "ContentView"
      to: "EmptyLibraryView conditional"
      via: "@Query isEmpty check"
      pattern: "@Query.*isEmpty|texts\\.isEmpty"
---

<objective>
Wire SwiftData container + bottom nav with library-first routing.

Purpose: Complete v2 navigation structure - bottom nav replaces v1 Input/Reading/History tabs.
Output: App-level SwiftData setup, TabView with home/library/search tabs, conditional routing to library or empty state.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Plan 06-01 deliverables:
@.planning/phases/06-swiftdata-library/06-01-SUMMARY.md

Current app structure:
@seed/seedApp.swift
@seed/ContentView.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add SwiftData modelContainer to app</name>
  <files>seed/seedApp.swift</files>
  <action>
Import SwiftData at top.
Add .modelContainer(for: SavedText.self) to WindowGroup.
Remove onboarding logic (v2 removes onboarding flow per requirements).
Update ContentView call to pass no settings if settings removed, or keep if still needed for color scheme.

Result: SwiftData persistence active app-wide.
  </action>
  <verify>xcodebuild builds, app launches without crash</verify>
  <done>SwiftData container configured, app compiles</done>
</task>

<task type="auto">
  <name>Task 2: Create HomeView placeholder</name>
  <files>seed/Screens/HomeView.swift</files>
  <action>
Create simple HomeView:
- Shows app name/logo
- Brief description "Speed read with RSVP"
- Maybe shows recent activity or placeholder for future dashboard
- For now: centered VStack with Text + icon

This fulfills NAV-01's "home" tab. Placeholder for future expansion.
  </action>
  <verify>xcodebuild builds, HomeView preview renders</verify>
  <done>HomeView placeholder created</done>
</task>

<task type="auto">
  <name>Task 3: Replace ContentView with bottom nav TabView</name>
  <files>seed/ContentView.swift</files>
  <action>
Major refactor of ContentView:

1. Add @Query(sort: \SavedText.createdAt) var savedTexts: [SavedText]
2. Remove old TabView (Input/Reading/History)
3. Create new TabView with 3 tabs:
   - Tab 1: HomeView, label("Home", systemImage: "house")
   - Tab 2: Conditional - if savedTexts.isEmpty { EmptyLibraryView() } else { LibraryView() }, label("Library", systemImage: "books.vertical")
   - Tab 3: LibraryView with search pre-focused (or same LibraryView - search is built-in), label("Search", systemImage: "magnifyingglass")
4. Default selected tab: 1 (library) if texts exist, 0 (home) if empty (use @State var selectedTab)
5. Keep settings reference for color scheme if needed, or remove if v2 removes settings
6. Remove session/playback logic (will be rebuilt in Phase 7-8 with new flow)

Result: Bottom nav with home/library/search, library-first routing.
  </action>
  <verify>xcodebuild builds, app launches with bottom nav</verify>
  <done>Bottom nav with 3 tabs functional, library shows/empty state shows based on savedTexts count</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] xcodebuild -project seed.xcodeproj -scheme seed build succeeds
- [ ] App launches with bottom navigation
- [ ] SwiftData persistence working (can save/load)
- [ ] Library tab shows list when texts exist
- [ ] Library tab shows empty state when no texts
- [ ] All 3 tabs visible and tappable
</verification>

<success_criteria>
- All tasks completed
- SwiftData modelContainer configured
- Bottom nav with 3 tabs renders
- Library-first routing works
- Empty state conditional works
- App builds and runs
</success_criteria>

<output>
After completion, create `.planning/phases/06-swiftdata-library/06-02-SUMMARY.md`
</output>
