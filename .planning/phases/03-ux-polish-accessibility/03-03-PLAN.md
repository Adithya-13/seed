---
phase: 03-ux-polish-accessibility
plan: 03
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - seed/Presentation/Views/RSVPDisplayView.swift
  - seed/ContentView.swift
  - seed/Presentation/Views/PlaybackControlsView.swift
autonomous: true

must_haves:
  truths:
    - "User can enable focus mode for distraction-free reading"
    - "Focus mode hides all UI except RSVP display"
    - "User can exit focus mode with tap gesture"
    - "Reading display uses eye-friendly colors"
  artifacts:
    - path: "seed/Presentation/Views/RSVPDisplayView.swift"
      provides: "Focus mode support, eye-friendly colors"
    - path: "seed/ContentView.swift"
      provides: "Focus mode layout toggle"
  key_links:
    - from: "ContentView"
      to: "settings.focusMode"
      via: "conditional UI display"
      pattern: "focusMode"
    - from: "RSVPDisplayView"
      to: "eye-friendly colors"
      via: "color definitions"
---

<objective>
Implement focus mode (fullscreen RSVP) and apply eye-friendly color palette for App Store compliance.

Purpose: Complete UX-05 (eye-friendly colors) and RSVP-11 (focus mode) requirements. Apple HIG compliance (UX-04).
Output: Focus mode toggle, optimized reading colors, polished HIG-compliant UI.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@seed/Domain/Models/AppSettings.swift
@seed/Presentation/Views/RSVPDisplayView.swift
@seed/ContentView.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define eye-friendly color palette</name>
  <files>seed/Presentation/Views/RSVPDisplayView.swift</files>
  <action>
Add computed properties for reading colors:

private var readingBackground: Color {
    settings.colorScheme == .dark ? Color(red: 0.1, green: 0.1, blue: 0.12) : Color(red: 0.98, green: 0.97, blue: 0.95)
}

private var readingText: Color {
    settings.colorScheme == .dark ? Color(red: 0.9, green: 0.88, blue: 0.85) : Color(red: 0.15, green: 0.15, blue: 0.2)
}

Replace .foregroundStyle(Color.primary.opacity(0.9)) with .foregroundStyle(readingText).
Remove hardcoded opacity, use full colors for better contrast.

Eye-friendly rationale: Reduced blue light (warm tints), high contrast, soft edges.
  </action>
  <verify>Build succeeds, colors display correctly</verify>
  <done>RSVP display uses eye-friendly warm palette</done>
</task>

<task type="auto">
  <name>Task 2: Implement focus mode UI</name>
  <files>seed/ContentView.swift</files>
  <action>
Modify ContentView body to support focus mode:

if hasLoadedText {
    if settings.focusMode {
        // Focus mode: fullscreen RSVP only
        ZStack {
            readingBackground.ignoresSafeArea()
            RSVPDisplayView(playbackState: viewModel.playbackState, settings: settings)
                .onTapGesture {
                    if viewModel.playbackState.isPlaying {
                        viewModel.pause()
                    } else {
                        viewModel.play()
                    }
                }
        }
        .statusBarHidden(true)
        .persistentSystemOverlays(.hidden) // iOS 16+ for hiding indicators
    } else {
        // Normal mode: existing UI
        VStack(spacing: 32) {
            Spacer()
            RSVPDisplayView(playbackState: viewModel.playbackState, settings: settings)
            Spacer()
            PlaybackControlsView(...)
        }
        .padding()
        .toolbar { ... }
    }
}

Add readingBackground computed property matching Task 1 colors.
Settings toggle controls focusMode boolean.
  </action>
  <verify>Build succeeds, focus mode toggle works</verify>
  <done>Focus mode shows fullscreen RSVP, tap to play/pause</done>
</task>

<task type="auto">
  <name>Task 3: Polish UI for Apple HIG compliance</name>
  <files>seed/Presentation/Views/PlaybackControlsView.swift, seed/ContentView.swift</files>
  <action>
PlaybackControlsView:
- Ensure SF Symbols for icons (play.fill, pause.fill, backward.fill, forward.fill)
- Proper button sizing (min 44x44 tap target)
- Native button styles (.bordered or .borderless)

ContentView:
- Settings gear uses SF Symbol "gearshape.fill"
- Reset button uses "arrow.counterclockwise"
- Proper NavigationStack usage (already exists)

InputSourcePicker (no change needed if already using native Picker/TextField).

Review: Spacing, alignment, contrast all follow HIG. No custom UI that violates standards.
  </action>
  <verify>Build succeeds, UI elements meet 44pt touch targets</verify>
  <done>All controls use SF Symbols, proper sizing, HIG-compliant layout</done>
</task>

</tasks>

<verification>
- [ ] Build succeeds without errors
- [ ] Eye-friendly colors visible in light/dark modes
- [ ] Focus mode toggle in settings activates fullscreen RSVP
- [ ] Tap gesture in focus mode plays/pauses
- [ ] All buttons use SF Symbols and meet 44pt minimum
- [ ] No HIG violations (custom controls, poor contrast, tiny targets)
</verification>

<success_criteria>
- All tasks completed
- Focus mode provides distraction-free reading (RSVP-11)
- Eye-friendly color palette applied (UX-05)
- Apple HIG compliance verified (UX-04)
- Phase 3 complete, app ready for App Store polish
</success_criteria>

<output>
After completion, create `.planning/phases/03-ux-polish-accessibility/03-03-SUMMARY.md`
</output>
