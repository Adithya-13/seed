---
phase: 03-ux-polish-accessibility
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - seed/Presentation/Views/OnboardingView.swift
  - seed/seedApp.swift
  - seed/Domain/Models/AppSettings.swift
autonomous: true

must_haves:
  truths:
    - "New users see onboarding on first launch"
    - "Onboarding demonstrates RSVP vs normal reading"
    - "User can skip or complete onboarding"
    - "Onboarding never shows again after completion"
  artifacts:
    - path: "seed/Presentation/Views/OnboardingView.swift"
      provides: "Interactive onboarding with RSVP demo"
      min_lines: 50
    - path: "seed/Domain/Models/AppSettings.swift"
      provides: "hasCompletedOnboarding flag"
      contains: "@AppStorage"
  key_links:
    - from: "seedApp.swift"
      to: "AppSettings.hasCompletedOnboarding"
      via: "conditional view display"
      pattern: "hasCompletedOnboarding"
    - from: "OnboardingView"
      to: "AppSettings"
      via: "completion callback"
---

<objective>
Create interactive onboarding that demonstrates RSVP benefits vs traditional reading for first-time users.

Purpose: Users unfamiliar with RSVP need to experience it to understand the value (UX-03 requirement).
Output: Onboarding flow with RSVP demo, first-launch detection.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@seed/Domain/Models/AppSettings.swift
@seed/seedApp.swift
@seed/Domain/RSVPEngine.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add hasCompletedOnboarding to AppSettings</name>
  <files>seed/Domain/Models/AppSettings.swift</files>
  <action>
Add to AppSettings:
@AppStorage("hasCompletedOnboarding") var hasCompletedOnboarding: Bool = false

func completeOnboarding() {
    hasCompletedOnboarding = true
}

This persists first-launch state.
  </action>
  <verify>Build succeeds</verify>
  <done>Settings tracks onboarding completion</done>
</task>

<task type="auto">
  <name>Task 2: Create OnboardingView with RSVP demo</name>
  <files>seed/Presentation/Views/OnboardingView.swift</files>
  <action>
Create OnboardingView with TabView + PageTabViewStyle for pages:

Page 1: Welcome
- Title: "Welcome to Seed"
- Subtitle: "Read faster with RSVP training"
- Visual: App icon or RSVP graphic

Page 2: RSVP Demo
- Title: "How RSVP Works"
- Mini RSVP display showing sample text at 300 WPM (3-5 words loop)
- Use RSVPEngine + PlaybackState for real demo
- Explanation: "Words appear one at a time. No eye movement needed."

Page 3: Benefits
- Title: "Why RSVP?"
- Bullet points: "Eliminate saccades", "Reduce distractions", "Increase focus"

Page 4: Get Started
- "Get Started" button calls onComplete() callback
- "Skip" button (top right) also calls onComplete()

Accept var settings: AppSettings, onComplete closure.
Call settings.completeOnboarding() + onComplete() when done.

Use .indexViewStyle(.page(backgroundDisplayMode: .always)) for dots.
Follow Apple HIG: clear, concise, native styling.
  </action>
  <verify>Build succeeds, onboarding pages display</verify>
  <done>4-page onboarding with RSVP demo ready</done>
</task>

<task type="auto">
  <name>Task 3: Integrate onboarding into app launch</name>
  <files>seed/seedApp.swift</files>
  <action>
In seedApp.swift body:
- Create @State var settings = AppSettings()
- Conditional view:
  if settings.hasCompletedOnboarding {
      NavigationStack { ContentView() } // pass settings if needed
  } else {
      OnboardingView(settings: settings) {
          // onComplete triggers view refresh via settings change
      }
  }

Ensure ContentView receives settings if Plan 01 needs it.
No NavigationStack around OnboardingView (fullscreen experience).

Update: If ContentView needs settings, pass as @Environment or parameter.
  </action>
  <verify>Build succeeds, onboarding shows on first launch, skips on subsequent</verify>
  <done>First launch shows onboarding, then goes to main app</done>
</task>

</tasks>

<verification>
- [ ] Build succeeds without errors
- [ ] Delete app and reinstall shows onboarding
- [ ] RSVP demo on page 2 actually plays words
- [ ] "Get Started" button completes onboarding
- [ ] Second launch skips directly to ContentView
</verification>

<success_criteria>
- All tasks completed
- OnboardingView demonstrates RSVP with live demo
- First-launch detection works via AppStorage
- Onboarding never repeats after completion
- UX-03 (interactive onboarding) requirement satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/03-ux-polish-accessibility/03-02-SUMMARY.md`
</output>
