---
phase: 03-ux-polish-accessibility
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - seed/Domain/Models/AppSettings.swift
  - seed/Presentation/Views/SettingsView.swift
  - seed/Presentation/Views/RSVPDisplayView.swift
  - seed/ContentView.swift
autonomous: true

must_haves:
  truths:
    - "User can adjust font size in settings"
    - "Font changes apply to RSVP display immediately"
    - "User can toggle between light/dark themes"
    - "Theme changes persist across app restarts"
  artifacts:
    - path: "seed/Domain/Models/AppSettings.swift"
      provides: "Settings model with fontSize and colorScheme"
      min_lines: 20
      contains: "@Observable"
    - path: "seed/Presentation/Views/SettingsView.swift"
      provides: "Settings UI with font/theme controls"
      min_lines: 30
    - path: "seed/Presentation/Views/RSVPDisplayView.swift"
      provides: "Font size binding from settings"
  key_links:
    - from: "SettingsView"
      to: "AppSettings"
      via: "@Bindable settings"
      pattern: "@Bindable.*AppSettings"
    - from: "RSVPDisplayView"
      to: "AppSettings.fontSize"
      via: "font size binding"
      pattern: "settings\\.fontSize"
---

<objective>
Add settings infrastructure with font size and theme controls for RSVP display customization.

Purpose: App Store requires accessibility (Dynamic Type equivalent) and theme support for user comfort.
Output: Settings model, settings UI, integrated font/theme controls.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@seed/Domain/Models/PlaybackState.swift
@seed/Presentation/Views/RSVPDisplayView.swift
@seed/ContentView.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AppSettings model</name>
  <files>seed/Domain/Models/AppSettings.swift</files>
  <action>
Create @Observable AppSettings class with:
- fontSize: CGFloat (16-48 range, default 32)
- colorScheme: ColorScheme? (nil = system, .light, .dark)
- focusMode: Bool (default false, for RSVP-11)

Use @AppStorage for persistence:
- @AppStorage("fontSize") fontSize
- @AppStorage("colorScheme") colorScheme (store as String, map to ColorScheme)
- @AppStorage("focusMode") focusMode

Follow PlaybackState.swift pattern (same @Observable approach).
  </action>
  <verify>Build succeeds, no errors</verify>
  <done>AppSettings model persists font/theme/focus settings</done>
</task>

<task type="auto">
  <name>Task 2: Create SettingsView with font and theme controls</name>
  <files>seed/Presentation/Views/SettingsView.swift</files>
  <action>
Create SettingsView with:
- Font size slider (16-48, step 2, displays current size)
- ColorScheme picker (System/Light/Dark using Picker)
- Focus mode toggle (prepare for RSVP-11)
- Navigation title "Settings"

Use @Bindable var settings: AppSettings as parameter.
Layout: Form { Section("Display") { ... } Section("Reading") { ... } }

Follow Apple HIG: native controls, clear labels, proper spacing.
  </action>
  <verify>Build succeeds, settings UI displays correctly</verify>
  <done>Settings screen shows font/theme/focus controls</done>
</task>

<task type="auto">
  <name>Task 3: Integrate settings into ContentView and RSVPDisplayView</name>
  <files>seed/ContentView.swift, seed/Presentation/Views/RSVPDisplayView.swift</files>
  <action>
ContentView:
- Add @State private var settings = AppSettings() at top
- Add toolbar item (placement: .topBarTrailing) with gear icon â†’ NavigationLink to SettingsView(settings: settings)
- Apply .preferredColorScheme(settings.colorScheme) to root VStack
- Pass settings to RSVPDisplayView

RSVPDisplayView:
- Add var settings: AppSettings parameter
- Replace hardcoded font size 32 with settings.fontSize
- Keep weight/design, only size is dynamic
- Update preview with mock settings

Ensure NavigationStack wraps ContentView in seedApp.swift if not present.
  </action>
  <verify>Build succeeds, settings gear appears, font/theme changes work</verify>
  <done>Settings accessible from toolbar, changes apply immediately to RSVP display</done>
</task>

</tasks>

<verification>
- [ ] Build succeeds without errors
- [ ] Settings gear icon appears in toolbar
- [ ] Font size slider changes RSVP text size immediately
- [ ] Theme picker switches light/dark modes
- [ ] Settings persist across app restarts
</verification>

<success_criteria>
- All tasks completed
- AppSettings model persists user preferences
- SettingsView shows font/theme controls
- RSVP display responds to settings changes in real-time
- UX-01 (font size) and UX-02 (theme) requirements satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/03-ux-polish-accessibility/03-01-SUMMARY.md`
</output>
